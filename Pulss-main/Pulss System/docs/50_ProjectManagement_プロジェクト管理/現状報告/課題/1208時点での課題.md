前提・全体像の整理
新しいフロントエンドは Cursor / CodexIDE を使ってクリーンなアーキテクチャで構築済み。

画面は概ね表示されているが、バックエンド／サーバ側の処理が未実装 or 接続されていない箇所が多い。

今回の打ち合わせでは、

クライアント管理

導入タスク / 運用タスク

スケジュール

ダッシュボード（チームレクターボード）

Slack 連携

SNSニュース
を一つずつ動かしながら、

「動いているところ」

「動いていないところ」
を確認している。

この整理結果をベースに、後で「要件定義書」と「Codex向けプロンプト」に落としていくイメージですね。

画面・機能別の要件整理
2-1. クライアント管理（一覧／詳細）
期待される姿（要件）
会社ごとに「ステータス」「フェーズ」などを管理できる。

ステータス例：制約前 / 制約済み

フェーズ例：検討中 / ヒアリング中 / 提案中 / 見積もり / 運用中 など。

一覧の右側にあるステータス部分をクリックすると、フェーズの変更やステータス変更ができる。

「営業担当」「ディレクター」「最終接点」などの担当者情報を、既存クライアントに対しても編集・更新できる。

「ステータス切り替え」操作で、制約前 ⇔ 制約済み のリストが整合する（制約済みに移動するなど）。

「パルスURL発行」ボタンを押すと、クライアントごとのパルスURLが生成される。

現状の問題

ステータス変更 UI は開くが、変更が確定・保存されない。

「ステータス切り替え」ボタンを押しても、制約済みタブに移動しない／一覧が変わらない。

「パルスURL発行」ボタンを押しても何も起きない（裏側で処理が走っていない）。

既存クライアントについて、

「営業」「ディレクター」「最終接点」などの項目が編集できない（新規登録時にしかセットできないような挙動）。

制約前クライアントの「数」やフェーズ別件数が直感的に把握できるUIがまだない（数が見えない）。

バックエンド側の必要要件（高レベル）

クライアント情報の CRUD API

PATCH /clients/{id}：ステータス・フェーズ・担当者・最終接点などを更新。

POST /clients：新規クライアント追加。

パルスURL発行API

POST /clients/{id}/pulse-url：URL生成＆保存。

一覧取得API

ステータス／フェーズ／業種などでフィルタリング・カウントできるようにする。

2-2. 新規クライアント登録 & 社内メモ
期待される姿（要件）

「新規クライアント」から、

会社名

業種

ステータス（制約前／制約済み）

フェーズ（ヒアリング、提案 など）

営業担当、ディレクター、最終接点

社内メモ
を入力して「追加」するとクライアントが登録される。

入力した「社内メモ」は、どこかの画面（クライアント詳細など）で閲覧できる。

現状の問題

「社内メモ」が入力できるが、どこにも表示されていない（保存先 or 表示箇所が未定義）。

一時的に「追加」ボタンを押してもクライアントが追加されない状態があった（サーバが落ちていた可能性）。サーバ再起動後は追加できるようになった。

既存レコードで「焼肉ヘブン東京」が「東京」になっているなど、データが意図しない変形をしている例が存在。

バックエンド側の必要要件

社内メモを保存するカラムと API（クライアント情報に紐付け）。

クライアント詳細APIで社内メモも返す。

既存データの名称の扱い（編集時の上書き仕様）を整理。

2-3. 導入タスク / 導入後の運用タスク

（クライアント詳細画面内の「導入タスク」「運用タスク」）

期待される姿（要件）

導入タスク：

タスク名

期限日

担当
を入力して「追加」すると、そのクライアントに紐づく導入タスクが登録・表示される。

運用タスクも同様に登録・表示。

「AI提案」ボタンで、AIがタスクの案を生成してくれる（将来的な機能）。

現状の問題

タスク名・日付・担当まで入力できているが、「追加」を押してもタスクが追加されない。

導入タスク・運用タスクともに同じ症状。

「AI提案」は裏側に何もないので当然動作していない。

バックエンド側の必要要件

クライアントに紐づくタスクの CRUD API

POST /clients/{id}/tasks

GET /clients/{id}/tasks

PATCH /tasks/{id} など。

タスク種別（導入 / 運用）を区別するフィールド。

将来のAI提案用エンドポイント（※後回しにしてもOKだがインタフェースだけ決めておくと良い）。

2-4. Slack 連携 & 最終接点
期待される姿（要件）

クライアント単位で「コミュニケーションツール」として Slack を紐づける。

少なくとも Slack URL（チャンネル or DMリンク）を登録できる。

クライアント詳細から「Slackを開く」ボタンを押すと、その URL に外部遷移して Slack が開く。

最終接点（例：電話、対面、Slack など）を設定できる UI が必要。

MVP としては「外部リンクで Slack に飛ぶ」で十分、将来はより高度な連携も検討。

現状の問題

UI上に「Slack」と表示されているが、

どこで Slack URL を設定するのか不明。

最終接点を設定する場所も存在しない。

右上の Slack アイコンを押すと Slack に飛ぶ挙動はあるが、挙動が安定していないタイミングもあった（サーバ状態やルーティングとの兼ね合い）。

バックエンド側の必要要件

クライアントごとの Slack URL / コミュニケーションチャネルを保存するフィールド。

クライアント詳細APIでそれを返し、フロントはそれを元にリンク生成。

2-5. スケジュール（カレンダー）
期待される姿（要件）

カレンダー表示（月表示など）が正しく曜日・日付を表示。

右上の「予定を追加」から以下項目を入力：

日付

タイプ（ミーティング、期限、締め切り、その他 + 将来追加予定：撮影、動画投稿 など）

チーム（セールス、ディレクター、クリエイティブ → 将来「カメラマンチーム」「編集者チーム」に分割）

メモ

「保存」するとスケジュールが登録・反映される。

「キャンセル」でモーダルが閉じる。

現状の問題

日付選択やタイプ・チーム選択はできるが、

「保存」に失敗する（エラー表示 or 何も起きない）。

「キャンセル」ボタンは正常に動作して閉じられる。

サーバ起動前後で挙動を確認したが、サーバが立ち上がっていても保存に失敗しており、バックエンドの実装 or 接続そのものがない可能性が高い。

バックエンド側の必要要件

スケジュールの CRUD API

POST /schedules

GET /schedules?date=...&team=...

スケジュールの種別（ミーティング／期限／締切／撮影／動画投稿 etc.）とチーム（セールス／ディレクター／カメラマンチーム／編集者チーム etc.）を持つスキーマ。

2-6. ダッシュボード / チームレクターボード
期待される姿（要件）

「チームレクターボード」で、

全案件のフェーズ

タスク進行状況

アラート
を一覧で俯瞰できる。

新しく追加したクライアント／タスク／スケジュールなどが、ダッシュボードにも反映される。

「更新」ボタンでデータをリロードできる。

画面遷移（戻る、リロード）を行っても、アプリが固まらない。

現状の問題

「ダッシュボードを準備しています」からの遷移に問題あり：

リロードすると真っ白で固まるケースがある。

サーバを切っているのに表示されてしまう場合もあり、状態管理が不整合。

「更新」ボタンを押しても反応しない。

クライアントを追加した後、チームレクターボードにその情報が反映されていない（データが取れていない or 更新トリガーがない）。

バックエンド側の必要要件

ダッシュボード用の集計 API

各案件のフェーズ・タスク状況・アラートを集約。

「更新」ボタンから呼び出すエンドポイント。

フロント側でのローディング状態管理（サーバ起動／非起動時のハンドリング）。

2-7. SNSニュース
期待される姿（要件）

「SNSニュース」セクションで、

全プラットフォーム / Instagram / TikTok / YouTube / X(Twitter) / その他

全業種 / 飲食 / 美容 / ホテル / 旅行 / その他
のフィルタを切り替えられる。

各ニュースカードをクリックすると、該当記事 or SNSポストの URL に遷移する。

将来的には AI / バックエンドから実データを取得して表示することを想定。

現状の問題

現状は「サンプルドメイン」としてダミー表示されており、

クリックしても遷移しない。

実データ連携はまだされていない。

バックエンド側の必要要件

SNSニュース情報の取得API（内部DB or 外部API）。

プラットフォーム・業種によるフィルタリング機能。

ニュースカードにURLを持たせ、フロントからリンク遷移できるようにする。

2-8. 共通・インフラ／エラーハンドリング
現状で顕在化している課題

サーバが立ち上がっていない状態でもフロントが部分的に動いてしまうため、

どこまでがフロントのモックデータで、

どこからがバックエンド依存か
がわかりにくい。

サーバ起動直後や未起動の時に、

「ダッシュボードを準備しています」から進まない、

リロードで真っ白になる、
などの致命的なUXが発生。

各操作（保存・追加・発行など）で失敗したときのエラーメッセージが「保存に失敗しました」など最低限の表示しかなく、ユーザー視点で原因がわからない。

必要な共通要件

APIエラー時の

トーストやダイアログによるエラーメッセージの標準化

リトライや問い合わせ先の案内

サーバ未起動時のグローバルなハンドリング

「現在システムメンテナンス中です」といった表示。

ローディング状態（スピナー等）の一貫した制御。

今後の「要件定義書」作成に向けての整理の方向性
この時点での「要件整理」を踏まえると、要件定義書はだいたい以下の構成でまとめていくのが良さそうです。

システム概要

パルスとは何か

新フロント＋バックエンド構成の概要

画面一覧・機能一覧

クライアント管理

クライアント詳細（導入タスク / 運用タスク / 社内メモ / Slack）

スケジュール

ダッシュボード（チームレクターボード）

SNSニュース

機能要件

上で整理した「期待される姿」と「必要なAPI／データ項目」を、画面ごとに仕様化。

状態遷移（制約前⇔制約済み、フェーズの変化など）を図・テーブルで定義。

非機能要件

レスポンス時間

エラーハンドリング

ログ／監視

セキュリティ（認証・認可）

インタフェース要件（API一覧）

クライアント、タスク、スケジュール、ダッシュボード、SNSニュース、Slack 連携などのAPI定義。